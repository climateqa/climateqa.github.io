<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial-extras/talk-to-ipcc-technical" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Talk to IPCC - Technical Documentation | ClimateQ&amp;A</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://climateqa.com/img/screenshots/multimodal1.png"><meta data-rh="true" name="twitter:image" content="https://climateqa.com/img/screenshots/multimodal1.png"><meta data-rh="true" property="og:url" content="https://climateqa.com/docs/tutorial-extras/talk-to-ipcc-technical"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Talk to IPCC - Technical Documentation | ClimateQ&amp;A"><meta data-rh="true" name="description" content="This page provides comprehensive technical documentation for the Talk to IPCC feature, including data processing pipelines, storage optimization strategies, and query mechanisms."><meta data-rh="true" property="og:description" content="This page provides comprehensive technical documentation for the Talk to IPCC feature, including data processing pipelines, storage optimization strategies, and query mechanisms."><link data-rh="true" rel="icon" href="/img/logo_climateqa.png"><link data-rh="true" rel="canonical" href="https://climateqa.com/docs/tutorial-extras/talk-to-ipcc-technical"><link data-rh="true" rel="alternate" href="https://climateqa.com/docs/tutorial-extras/talk-to-ipcc-technical" hreflang="en"><link data-rh="true" rel="alternate" href="https://climateqa.com/docs/tutorial-extras/talk-to-ipcc-technical" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ClimateQ&amp;A RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ClimateQ&amp;A Atom Feed"><link rel="stylesheet" href="/assets/css/styles.454c9aff.css">
<script src="/assets/js/runtime~main.eb43dd35.js" defer="defer"></script>
<script src="/assets/js/main.8736da6b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_climateqa.png" alt="ClimateQ&amp;A Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_climateqa.png" alt="ClimateQ&amp;A Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ClimateQ&amp;A</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro/">About ClimateQ&amp;A</a><a class="navbar__item navbar__link" href="/docs/sources">Sources</a><a class="navbar__item navbar__link" href="/docs/contact">Contact</a><a class="navbar__item navbar__link" href="/docs/feedbacks">Feedbacks</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">v1.8.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/changelog/v1.8.0/">v1.8.0</a></li><li><a class="dropdown__link" href="/docs/changelog/v1.7.0/">v1.7.0</a></li><li><a class="dropdown__link" href="/docs/changelog/v1.6.0/">v1.6.0</a></li><li><a class="dropdown__link" href="/docs/changelog/v1.5.0/">v1.5.0</a></li><li><a class="dropdown__link" href="/docs/changelog/v1.4.0/">v1.4.0</a></li></ul></div><a href="https://huggingface.co/spaces/Ekimetrics/climate-question-answering/tree/main" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/">About ClimateQ&amp;A</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/sources/">Sources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contact/">Contact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/feedbacks/">Feedbacks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/carbon-footprint/">Carbon Footprint</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/citations">Citations</a><button aria-label="Expand sidebar category &#x27;Citations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/for-developers">For developers</a><button aria-label="Collapse sidebar category &#x27;For developers&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-extras/devs-intro">Developer Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorial-extras/talk-to-ipcc-technical">Talk to IPCC - Technical Documentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/changelog">Changelog</a><button aria-label="Expand sidebar category &#x27;Changelog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/for-developers"><span itemprop="name">For developers</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Talk to IPCC - Technical Documentation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Talk to IPCC - Technical Documentation</h1>
<p>This page provides comprehensive technical documentation for the Talk to IPCC feature, including data processing pipelines, storage optimization strategies, and query mechanisms.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Talk to IPCC provides interactive access to the IPCC-WGI AR6 Interactive Atlas Dataset (CMIP6), enabling users to query global climate projections through natural language interfaces. The system transforms raw NetCDF climate data into an optimized, queryable format supporting real-time visualization generation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-sources-and-structure">Data Sources and Structure<a href="#data-sources-and-structure" class="hash-link" aria-label="Direct link to Data Sources and Structure" title="Direct link to Data Sources and Structure">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="source-dataset">Source Dataset<a href="#source-dataset" class="hash-link" aria-label="Direct link to Source Dataset" title="Direct link to Source Dataset">​</a></h3>
<ul>
<li><strong>Origin</strong>: IPCC-WGI AR6 Interactive Atlas Dataset hosted on DIGITAL.CSIC</li>
<li><strong>Format</strong>: NetCDF files with 1°×1° spatial resolution</li>
<li><strong>Coverage</strong>: 180 × 360 grid points globally (64,800 total grid points)</li>
<li><strong>Coordinates</strong>: Longitudes from -179.5° to 179.5°, latitudes from -89.5° to 89.5°</li>
<li><strong>Temporal Range</strong>:<!-- -->
<ul>
<li>Historical: 1850-2015</li>
<li>Projections: 2016-2100</li>
</ul>
</li>
<li><strong>Scenarios</strong>: Historical + 4 SSP scenarios (SSP1-2.6, SSP2-4.5, SSP3-7.0, SSP5-8.5)</li>
<li><strong>Realizations</strong>: Multiple climate model outputs per scenario for ensemble analysis</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="climate-indicators-available">Climate Indicators Available<a href="#climate-indicators-available" class="hash-link" aria-label="Direct link to Climate Indicators Available" title="Direct link to Climate Indicators Available">​</a></h3>
<p>The dataset includes 22 comprehensive climate indicators across multiple categories:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="heat-and-cold-indicators">Heat and Cold Indicators<a href="#heat-and-cold-indicators" class="hash-link" aria-label="Direct link to Heat and Cold Indicators" title="Direct link to Heat and Cold Indicators">​</a></h4>
<table><thead><tr><th>Code</th><th>Name</th><th>Unit</th><th>Description</th></tr></thead><tbody><tr><td><code>t</code></td><td>Monthly mean temperature</td><td>°C</td><td>Monthly mean of daily mean temperature</td></tr><tr><td><code>tn</code></td><td>Monthly minimum temperature</td><td>°C</td><td>Monthly mean of daily minimum temperature</td></tr><tr><td><code>tx</code></td><td>Monthly maximum temperature</td><td>°C</td><td>Monthly mean of daily maximum temperature</td></tr><tr><td><code>tnn</code></td><td>Temperature minimum extreme</td><td>°C</td><td>Monthly minimum of daily minimum temperature</td></tr><tr><td><code>txx</code></td><td>Temperature maximum extreme</td><td>°C</td><td>Monthly maximum of daily maximum temperature</td></tr><tr><td><code>tx35</code></td><td>Hot days</td><td>days</td><td>Monthly count of days with maximum temperature above 35°C</td></tr><tr><td><code>tx40</code></td><td>Very hot days</td><td>days</td><td>Monthly count of days with maximum temperature above 40°C</td></tr><tr><td><code>tx35ba</code></td><td>Hot days (bias-adjusted)</td><td>days</td><td>Monthly bias adjusted TX35</td></tr><tr><td><code>tx40ba</code></td><td>Very hot days (bias-adjusted)</td><td>days</td><td>Monthly bias adjusted TX40</td></tr><tr><td><code>cd</code></td><td>Cooling degree days</td><td>days</td><td>Annual cooling degree days</td></tr><tr><td><code>hd</code></td><td>Heating degree days</td><td>°C days</td><td>Annual heating degree days</td></tr><tr><td><code>fd</code></td><td>Frost days</td><td>days</td><td>Monthly frost days</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="precipitation-and-drought-indicators">Precipitation and Drought Indicators<a href="#precipitation-and-drought-indicators" class="hash-link" aria-label="Direct link to Precipitation and Drought Indicators" title="Direct link to Precipitation and Drought Indicators">​</a></h4>
<table><thead><tr><th>Code</th><th>Name</th><th>Unit</th><th>Description</th></tr></thead><tbody><tr><td><code>pr</code></td><td>Total precipitation</td><td>mm/day</td><td>Monthly mean of daily total precipitation</td></tr><tr><td><code>rx1day</code></td><td>Maximum 1-day precipitation</td><td>mm</td><td>Monthly maximum of 1-day accumulated precipitation</td></tr><tr><td><code>rx5day</code></td><td>Maximum 5-day precipitation</td><td>mm</td><td>Monthly maximum of 5-day accumulated precipitation</td></tr><tr><td><code>cdd</code></td><td>Consecutive dry days</td><td>days</td><td>Annual consecutive dry days</td></tr><tr><td><code>spi6</code></td><td>Standardized Precipitation Index</td><td>1</td><td>SPI for 6 months cumulation period</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="environmental-conditions">Environmental Conditions<a href="#environmental-conditions" class="hash-link" aria-label="Direct link to Environmental Conditions" title="Direct link to Environmental Conditions">​</a></h4>
<table><thead><tr><th>Code</th><th>Name</th><th>Unit</th><th>Description</th></tr></thead><tbody><tr><td><code>sfcwind</code></td><td>Wind speed</td><td>m/s</td><td>Monthly mean of daily mean wind speed</td></tr><tr><td><code>prsn</code></td><td>Snowfall</td><td>mm/day</td><td>Monthly mean of accumulated snowfall precipitation</td></tr><tr><td><code>siconc</code></td><td>Sea ice concentration</td><td>%</td><td>Monthly mean of sea-ice area percentage</td></tr><tr><td><code>sst</code></td><td>Sea surface temperature</td><td>°C</td><td>Monthly mean of sea surface temperature</td></tr><tr><td><code>ph</code></td><td>Ocean pH</td><td>pH</td><td>Monthly mean of pH at surface</td></tr></tbody></table>
<p><strong>Note</strong>: Currently, Talk to IPCC supports only <code>t</code> (mean temperature) and <code>pr</code> (total precipitation). Additional indicators will be integrated in future releases.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-processing-pipeline">Data Processing Pipeline<a href="#data-processing-pipeline" class="hash-link" aria-label="Direct link to Data Processing Pipeline" title="Direct link to Data Processing Pipeline">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-data-transformation-architecture">1. Data Transformation Architecture<a href="#1-data-transformation-architecture" class="hash-link" aria-label="Direct link to 1. Data Transformation Architecture" title="Direct link to 1. Data Transformation Architecture">​</a></h3>
<p>The system implements a sophisticated pipeline to transform raw NetCDF files into optimized Parquet format:</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">graph TD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A[NetCDF Files&lt;br/&gt;DIGITAL.CSIC] --&gt; B[Coordinate Processing]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B --&gt; C[Country Classification]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C --&gt; D{Country Size}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt;|Small/Medium| E[Regular Processing]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt;|Large Grid| F[Macro Processing]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt;|Huge Grid| G[Double Aggregation]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E --&gt; H[Country.parquet]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    F --&gt; I[Country_macro.parquet]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    G --&gt; J[Country_macro.parquet&lt;br/&gt;Double Aggregated]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    H --&gt; K[Query Engine]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I --&gt; K</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    J --&gt; K</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-coordinate-system-integration">2. Coordinate System Integration<a href="#2-coordinate-system-integration" class="hash-link" aria-label="Direct link to 2. Coordinate System Integration" title="Direct link to 2. Coordinate System Integration">​</a></h3>
<p><strong>Coordinates Table Creation:</strong></p>
<ul>
<li>Global 1°×1° grid extraction from NetCDF files</li>
<li>Reverse geocoding using <code>reverse_geocoder.search()</code> for location mapping</li>
<li>ISO alpha-2 country codes via <code>pycountry</code> library</li>
<li>Administrative region (admin1) identification</li>
</ul>
<p><strong>Schema:</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> coordinates </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    latitude FLOAT64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    longitude FLOAT64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    country_code STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- ISO alpha-2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    admin1 STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">-- Region/state/province</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    country_name STRING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-performance-optimized-storage-strategy">3. Performance-Optimized Storage Strategy<a href="#3-performance-optimized-storage-strategy" class="hash-link" aria-label="Direct link to 3. Performance-Optimized Storage Strategy" title="Direct link to 3. Performance-Optimized Storage Strategy">​</a></h3>
<p>The system uses a three-tier optimization approach based on country grid size:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tier-1-regular-countries">Tier 1: Regular Countries<a href="#tier-1-regular-countries" class="hash-link" aria-label="Direct link to Tier 1: Regular Countries" title="Direct link to Tier 1: Regular Countries">​</a></h4>
<ul>
<li><strong>Storage</strong>: Single Parquet file per country per indicator</li>
<li><strong>File naming</strong>: <code>{indicator}/{country_code}.parquet</code> (e.g., <code>mean_temperature/FR.parquet</code>)</li>
<li><strong>Processing</strong>: Real-time aggregation during query execution</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tier-2-macro-countries-19-countries">Tier 2: Macro Countries (19 countries)<a href="#tier-2-macro-countries-19-countries" class="hash-link" aria-label="Direct link to Tier 2: Macro Countries (19 countries)" title="Direct link to Tier 2: Macro Countries (19 countries)">​</a></h4>
<p>Countries with large grid coverage requiring pre-aggregation for performance:</p>
<table><thead><tr><th>Country Code</th><th>Country Name</th></tr></thead><tbody><tr><td>JP</td><td>Japan</td></tr><tr><td>IN</td><td>India</td></tr><tr><td>MH</td><td>Marshall Islands</td></tr><tr><td>PT</td><td>Portugal</td></tr><tr><td>ID</td><td>Indonesia</td></tr><tr><td>SJ</td><td>Svalbard and Jan Mayen</td></tr><tr><td>MX</td><td>Mexico</td></tr><tr><td>CN</td><td>China</td></tr><tr><td>GL</td><td>Greenland</td></tr><tr><td>PN</td><td>Pitcairn</td></tr><tr><td>AR</td><td>Argentina</td></tr><tr><td>AQ</td><td>Antarctica</td></tr><tr><td>PF</td><td>French Polynesia</td></tr><tr><td>BR</td><td>Brazil</td></tr><tr><td>SH</td><td>Saint Helena, Ascension and Tristan da Cunha</td></tr><tr><td>GS</td><td>South Georgia and the South Sandwich Islands</td></tr><tr><td>ZA</td><td>South Africa</td></tr><tr><td>NZ</td><td>New Zealand</td></tr><tr><td>TF</td><td>French Southern Territories</td></tr></tbody></table>
<ul>
<li><strong>Storage</strong>: Both raw and pre-aggregated files</li>
<li><strong>Pre-aggregation SQL</strong>:</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       MEDIAN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">{indicator}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> {indicator}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       country_code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> country_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hf://datasets/ekimetrics/ipcc-atlas/{indicator}/{country_code}.parquet&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> country_code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> country_name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tier-3-huge-macro-countries-5-countries">Tier 3: Huge Macro Countries (5 countries)<a href="#tier-3-huge-macro-countries-5-countries" class="hash-link" aria-label="Direct link to Tier 3: Huge Macro Countries (5 countries)" title="Direct link to Tier 3: Huge Macro Countries (5 countries)">​</a></h4>
<p>Countries requiring double aggregation for optimal performance:</p>
<table><thead><tr><th>Country Code</th><th>Country Name</th></tr></thead><tbody><tr><td>CL</td><td>Chile</td></tr><tr><td>CA</td><td>Canada</td></tr><tr><td>AU</td><td>Australia</td></tr><tr><td>US</td><td>United States</td></tr><tr><td>RU</td><td>Russia</td></tr></tbody></table>
<ul>
<li><strong>Double aggregation SQL</strong>:</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> medians_per_month </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           MEDIAN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">{indicator}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> median_value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hf://datasets/ekimetrics/ipcc-atlas/{indicator}/{country_code}.parquet&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">median_value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> {indicator}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> medians_per_month</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-data-schema">4. Data Schema<a href="#4-data-schema" class="hash-link" aria-label="Direct link to 4. Data Schema" title="Direct link to 4. Data Schema">​</a></h3>
<p><strong>Indicator Tables Schema:</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> {indicator_table} </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    latitude FLOAT32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    longitude FLOAT32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">month</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    realization STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Climate model identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {indicator} FLOAT32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">-- Indicator value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    projection STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">-- Always &#x27;CMIP6&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">-- &#x27;historical&#x27; or SSP scenario</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    country_code STRING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    country_name STRING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="query-processing-system">Query Processing System<a href="#query-processing-system" class="hash-link" aria-label="Direct link to Query Processing System" title="Direct link to Query Processing System">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-visualization-types-and-queries">1. Visualization Types and Queries<a href="#1-visualization-types-and-queries" class="hash-link" aria-label="Direct link to 1. Visualization Types and Queries" title="Direct link to 1. Visualization Types and Queries">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="evolution-plot">Evolution Plot<a href="#evolution-plot" class="hash-link" aria-label="Direct link to Evolution Plot" title="Direct link to Evolution Plot">​</a></h4>
<p>Shows temporal evolution of indicators at specific locations with historical data and future projections.</p>
<p><strong>Regular Countries Query Example</strong> (Paris, France):</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> medians_per_month </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> MEDIAN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mean_temperature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> median_value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hf://datasets/ekimetrics/ipcc-atlas/mean_temperature/FR.parquet&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> latitude </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">48.5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> longitude </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1950</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">median_value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> mean_temperature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> medians_per_month</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Macro Countries Query Example</strong> (Shanghai, China):</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mean_temperature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mean_temperature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hf://datasets/ekimetrics/ipcc-atlas/mean_temperature/CN_macro.parquet&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> latitude </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31.5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> longitude </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">121.5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1950</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Huge Macro Countries Query Example</strong> (New York, USA):</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mean_temperature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hf://datasets/ekimetrics/ipcc-atlas/mean_temperature/US_macro.parquet&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> latitude </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40.5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> longitude </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">74.5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1950</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="choropleth-map">Choropleth Map<a href="#choropleth-map" class="hash-link" aria-label="Direct link to Choropleth Map" title="Direct link to Choropleth Map">​</a></h4>
<p>Displays spatial distribution of indicators across countries for specific years.</p>
<p><strong>Regular Countries Query Example</strong> (France, 2050):</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> medians_per_month </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           MEDIAN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mean_temperature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> median_value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hf://datasets/ekimetrics/ipcc-atlas/mean_temperature/FR.parquet&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">year</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2050</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">month</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">median_value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> mean_temperature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> medians_per_month</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> longitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scenario</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-query-optimization-strategy">2. Query Optimization Strategy<a href="#2-query-optimization-strategy" class="hash-link" aria-label="Direct link to 2. Query Optimization Strategy" title="Direct link to 2. Query Optimization Strategy">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="intelligent-routing">Intelligent Routing<a href="#intelligent-routing" class="hash-link" aria-label="Direct link to Intelligent Routing" title="Direct link to Intelligent Routing">​</a></h4>
<p>The system automatically selects the appropriate query strategy based on:</p>
<ul>
<li>Country classification (Regular/Macro/Huge Macro)</li>
<li>Available pre-aggregated data</li>
<li>Query complexity and expected performance</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="statistical-aggregation-methods">Statistical Aggregation Methods<a href="#statistical-aggregation-methods" class="hash-link" aria-label="Direct link to Statistical Aggregation Methods" title="Direct link to Statistical Aggregation Methods">​</a></h4>
<ol>
<li><strong>Ensemble Handling</strong>: Median computation across climate model realizations for statistical robustness</li>
<li><strong>Temporal Aggregation</strong>: Monthly medians averaged to annual values for consistency</li>
<li><strong>Spatial Consistency</strong>: Grid-point level precision maintained throughout processing</li>
<li><strong>Scenario Preservation</strong>: All SSP scenarios processed independently to maintain projection integrity</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-implementation">Technical Implementation<a href="#technical-implementation" class="hash-link" aria-label="Direct link to Technical Implementation" title="Direct link to Technical Implementation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-backend-architecture">1. Backend Architecture<a href="#1-backend-architecture" class="hash-link" aria-label="Direct link to 1. Backend Architecture" title="Direct link to 1. Backend Architecture">​</a></h3>
<p><strong>Core Components:</strong></p>
<ul>
<li><strong>Workflow Engine</strong>: <code>ipcc_workflow()</code> orchestrates query processing</li>
<li><strong>Parameter Extraction</strong>: LLM-powered analysis of natural language queries</li>
<li><strong>SQL Generation</strong>: Dynamic query building based on country tier and visualization type</li>
<li><strong>Parallel Processing</strong>: Asynchronous execution of multiple visualizations</li>
</ul>
<p><strong>Key Files:</strong></p>
<ul>
<li><code>climateqa/engine/talk_to_data/workflow/ipcc.py</code> - Main workflow orchestration</li>
<li><code>climateqa/engine/talk_to_data/ipcc/queries.py</code> - SQL query generation</li>
<li><code>climateqa/engine/talk_to_data/ipcc/plots.py</code> - Visualization functions</li>
<li><code>climateqa/engine/talk_to_data/ipcc/config.py</code> - Configuration and constants</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-performance-optimizations">2. Performance Optimizations<a href="#2-performance-optimizations" class="hash-link" aria-label="Direct link to 2. Performance Optimizations" title="Direct link to 2. Performance Optimizations">​</a></h3>
<p><strong>Storage Optimizations:</strong></p>
<ul>
<li>Zstandard (zstd) compression for Parquet files</li>
<li>Country-based partitioning for efficient filtering</li>
<li>Pre-computed aggregations for large countries</li>
</ul>
<p><strong>Query Optimizations:</strong></p>
<ul>
<li>Adaptive SQL generation based on data availability</li>
<li>Parallel execution of multiple visualization queries</li>
<li>Efficient memory management for large datasets</li>
<li>Connection pooling for database access</li>
</ul>
<p><strong>Caching Strategy:</strong></p>
<ul>
<li>Query result caching for repeated requests</li>
<li>Intermediate result storage for complex aggregations</li>
<li>Metadata caching for faster parameter extraction</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-error-handling-and-validation">3. Error Handling and Validation<a href="#3-error-handling-and-validation" class="hash-link" aria-label="Direct link to 3. Error Handling and Validation" title="Direct link to 3. Error Handling and Validation">​</a></h3>
<p><strong>Data Validation:</strong></p>
<ul>
<li>Coordinate bounds checking (-90 to 90 latitude, -180 to 180 longitude)</li>
<li>Year range validation (1850-2100)</li>
<li>Country code verification against available datasets</li>
<li>Scenario validation against supported SSP scenarios</li>
</ul>
<p><strong>Error Recovery:</strong></p>
<ul>
<li>Graceful degradation when data is unavailable</li>
<li>Alternative query strategies for performance issues</li>
<li>User-friendly error messages for invalid requests</li>
<li>Logging and monitoring for system health</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-reference">API Reference<a href="#api-reference" class="hash-link" aria-label="Direct link to API Reference" title="Direct link to API Reference">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="main-functions">Main Functions<a href="#main-functions" class="hash-link" aria-label="Direct link to Main Functions" title="Direct link to Main Functions">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ask_ipccquery-str-index_state-int--0-user_id-str--none--none"><code>ask_ipcc(query: str, index_state: int = 0, user_id: str | None = None)</code><a href="#ask_ipccquery-str-index_state-int--0-user_id-str--none--none" class="hash-link" aria-label="Direct link to ask_ipccquery-str-index_state-int--0-user_id-str--none--none" title="Direct link to ask_ipccquery-str-index_state-int--0-user_id-str--none--none">​</a></h4>
<p>Main entry point for IPCC data queries.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>query</code>: Natural language question about climate data</li>
<li><code>index_state</code>: Index of result to return (for pagination)</li>
<li><code>user_id</code>: User identifier for logging purposes</li>
</ul>
<p><strong>Returns:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">tuple</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># SQL query used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Resulting data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Callable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Figure generation function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># Plot information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># All SQL queries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># All dataframes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># All figure functions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># All plot information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># Current index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># Table names</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">str</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Error message (if any)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ipcc_workflowuser_input-str"><code>ipcc_workflow(user_input: str)</code><a href="#ipcc_workflowuser_input-str" class="hash-link" aria-label="Direct link to ipcc_workflowuser_input-str" title="Direct link to ipcc_workflowuser_input-str">​</a></h4>
<p>Core workflow processing function.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>user_input</code>: User&#x27;s natural language query</li>
</ul>
<p><strong>Returns:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">State </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;user_input&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;plots&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;outputs&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">dict</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;error&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-constants">Configuration Constants<a href="#configuration-constants" class="hash-link" aria-label="Direct link to Configuration Constants" title="Direct link to Configuration Constants">​</a></h3>
<p><strong>Available Scenarios:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IPCC_SCENARIO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;historical&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ssp126&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ssp245&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ssp370&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ssp585&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Supported Indicators:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IPCC_TABLES </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;mean_temperature&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;total_precipitation&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Plot Parameters:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IPCC_PLOT_PARAMETERS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;year&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;location&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorial-extras/devs-intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Developer Documentation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/changelog"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Changelog</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#data-sources-and-structure" class="table-of-contents__link toc-highlight">Data Sources and Structure</a><ul><li><a href="#source-dataset" class="table-of-contents__link toc-highlight">Source Dataset</a></li><li><a href="#climate-indicators-available" class="table-of-contents__link toc-highlight">Climate Indicators Available</a></li></ul></li><li><a href="#data-processing-pipeline" class="table-of-contents__link toc-highlight">Data Processing Pipeline</a><ul><li><a href="#1-data-transformation-architecture" class="table-of-contents__link toc-highlight">1. Data Transformation Architecture</a></li><li><a href="#2-coordinate-system-integration" class="table-of-contents__link toc-highlight">2. Coordinate System Integration</a></li><li><a href="#3-performance-optimized-storage-strategy" class="table-of-contents__link toc-highlight">3. Performance-Optimized Storage Strategy</a></li><li><a href="#4-data-schema" class="table-of-contents__link toc-highlight">4. Data Schema</a></li></ul></li><li><a href="#query-processing-system" class="table-of-contents__link toc-highlight">Query Processing System</a><ul><li><a href="#1-visualization-types-and-queries" class="table-of-contents__link toc-highlight">1. Visualization Types and Queries</a></li><li><a href="#2-query-optimization-strategy" class="table-of-contents__link toc-highlight">2. Query Optimization Strategy</a></li></ul></li><li><a href="#technical-implementation" class="table-of-contents__link toc-highlight">Technical Implementation</a><ul><li><a href="#1-backend-architecture" class="table-of-contents__link toc-highlight">1. Backend Architecture</a></li><li><a href="#2-performance-optimizations" class="table-of-contents__link toc-highlight">2. Performance Optimizations</a></li><li><a href="#3-error-handling-and-validation" class="table-of-contents__link toc-highlight">3. Error Handling and Validation</a></li></ul></li><li><a href="#api-reference" class="table-of-contents__link toc-highlight">API Reference</a><ul><li><a href="#main-functions" class="table-of-contents__link toc-highlight">Main Functions</a></li><li><a href="#configuration-constants" class="table-of-contents__link toc-highlight">Configuration Constants</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"></div></footer></div>
</body>
</html>